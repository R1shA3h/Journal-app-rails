<%= form_with(model: note, class: "content") do |form| %> 
  <% if note.errors.any? %>
    <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mt-3">
      <h2><%= pluralize(note.errors.count, "error") %> prohibited this note from being saved:</h2>

      <ul>
        <% note.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="flex flex-col my-4 ">
    <%= form.label :title %>
    <%= form.text_field :title, class: "rounded-md border border-black mt-1 focus:ring-black" %>
  </div>

  <div class="flex flex-col my-4 ">
    <%= form.label :description %>
    <%= form.text_area :description, rows: 6, class: "rounded-md border border-black mt-1 focus:ring-black" %>
  </div>

  <div class="flex flex-col my-4 ">
    <%= form.label :files %>
    <%= form.file_field :files, multiple: true, direct_upload:true, class: "block shadow rounded-md border border-gray-400 outline-none px-3 py-2 mt-2 w-full" %>
    
    <% if note.files.attached? %>
      <div class="mt-2">
        <h3 class="">Existing Attachments:</h3>
        <% note.files.each do |file| %>
          <div class="flex items-center justify-between mt-1">
            <%= link_to file.filename.to_s, url_for(file), target: "_blank", class: "text-blue-600" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="flex flex-col my-4">
    <%= form.label :visibility, "Visibility" %>
    <div>
      <%= form.radio_button :visibility, 'public', checked: note.visibility == 'public' %>
      <%= form.label :visibility_public, 'Public' %>
      
      <%= form.radio_button :visibility, 'private', checked: note.visibility == 'private' %>
      <%= form.label :visibility_private, 'Private' %>
      
      <%= form.radio_button :visibility, 'shared', checked: note.visibility == 'shared' %>
      <%= form.label :visibility_shared, 'Shared' %>
    </div>
  </div>

  <div class="flex space-x-2 mt-4">
    <%= form.submit class: "rounded-lg py-3 px-5 bg-blue-600 text-white inline-block font-medium cursor-pointer" %>
  </div>
<% end %>
